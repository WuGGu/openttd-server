<table mat-table
       [trackBy]="trackBy"
       [dataSource]="dataSource" multiTemplateDataRows
       class="mat-elevation-z8">
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef> Server</th>
    <td mat-cell *matCellDef="let element"> {{T(element).name}} </td>
  </ng-container>
  <ng-container matColumnDef="port">
    <th mat-header-cell *matHeaderCellDef> Port</th>
    <td mat-cell *matCellDef="let element"> {{T(element).port}} </td>
  </ng-container>
  <ng-container matColumnDef="config">
    <th mat-header-cell *matHeaderCellDef> Config</th>
    <td mat-cell *matCellDef="let element"> {{T(element).config?.name}} </td>
  </ng-container>
  <ng-container matColumnDef="startSaveGame">
    <th mat-header-cell *matHeaderCellDef> Start Save Game</th>
    <td mat-cell *matCellDef="let element"> {{T(element).saveGame?.name}} </td>
  </ng-container>
  <ng-container matColumnDef="saveGame">
    <th mat-header-cell *matHeaderCellDef> Save Game</th>
    <td mat-cell *matCellDef="let element"> {{T(element).saveGame?.name}} </td>
  </ng-container>
  <ng-container matColumnDef="autoSaveGame">
    <th mat-header-cell *matHeaderCellDef> Auto Save Game</th>
    <td mat-cell *matCellDef="let element"> {{T(element).saveGame?.name}} </td>
  </ng-container>

  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef aria-label="row actions">&nbsp;Actions</th>
    <td mat-cell *matCellDef="let element">
      <div class="flex justify-between">
        <button matTooltip="Starts this Openttd Server" mat-icon-button (click)="startServer(element)">
          <mat-icon>play_arrow</mat-icon>
        </button>
        <button mat-icon-button matTooltip="Deletes and stops (if running) the Openttd Server" (click)="deleteServer(element)">
          <mat-icon>delete</mat-icon>
        </button>
        <button mat-icon-button matTooltip="Terminates this Openttd Server" (click)="stopServer(element)">
          <mat-icon>close</mat-icon>
        </button>
        <button *ngIf="T(element)?.process" mat-icon-button matTooltip="Terminates this Openttd Server"
                (click)="loadTerminal(T(element).process)">
          <mat-icon>terminal</mat-icon>
        </button>
        <button *ngIf="T(element)?.process" mat-icon-button matTooltip="Saves the current game" (click)="save(element)">
          <mat-icon>save</mat-icon>
        </button>
      </div>


    </td>
  </ng-container>

  <!--  <ng-container matColumnDef="expand">-->
  <!--    <th mat-header-cell *matHeaderCellDef aria-label="row actions">&nbsp;</th>-->
  <!--    <td mat-cell *matCellDef="let element">-->
  <!--      <div class="flex justify-end">-->
  <!--        <button mat-icon-button aria-label="expand row" (click)="loadTerminal();(expandedElement = expandedElement?.name === element?.name ? null : element); $event.stopPropagation()">-->
  <!--          <mat-icon *ngIf="expandedElement?.name !== element?.name">keyboard_arrow_down</mat-icon>-->
  <!--          <mat-icon *ngIf="expandedElement?.name === element?.name">keyboard_arrow_up</mat-icon>-->
  <!--        </button>-->
  <!--      </div>-->
  <!--    </td>-->
  <!--  </ng-container>-->

  <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
  <ng-container matColumnDef="expandedDetail">
    <td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplayWithExpand.length">
      <div class="example-element-detail"
           [@detailExpand]="element?.name === expandedElement?.name ? 'expanded' : 'collapsed'">
        <div *ngIf="expandedElement" class="w-full">

          <!--          <app-openttd-process-terminal *ngIf="T(expandedElement).process" [openttdProcess]="T(expandedElement).process"></app-openttd-process-terminal>-->

        </div>
      </div>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="columnsToDisplayWithExpand"></tr>
  <tr mat-row *matRowDef="let element; columns: columnsToDisplayWithExpand;"
      class="example-element-row"
      [class.example-expanded-row]="expandedElement === element">
  </tr>
  <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
</table>
